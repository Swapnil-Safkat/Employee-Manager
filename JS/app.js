const data = [
  {
    "id": 0,
    "firstName": "Westley",
    "lastName": "Effertz",
    "email": "Marty.Green@hotmail.com",
    "point": 57,
    "phone": "639.990.1777 x06740",
    "company": "Gaylord - Miller"
  },
  {
    "id": 1,
    "firstName": "Jeramy",
    "lastName": "Raynor",
    "email": "Edward_Corwin82@hotmail.com",
    "point": 67,
    "phone": "659-370-3622 x197",
    "company": "Ziemann, Satterfield and Walker"
  },
  {
    "id": 2,
    "firstName": "Montana",
    "lastName": "Konopelski",
    "email": "Rosanna7@gmail.com",
    "point": 55,
    "phone": "(972) 459-3024 x5101",
    "company": "Kuhic - Wyman"
  },
  {
    "id": 3,
    "firstName": "Catharine",
    "lastName": "Gutkowski",
    "email": "Reese99@hotmail.com",
    "point": 78,
    "phone": "706.810.9406 x470",
    "company": "Rath, Parker and Dicki"
  },
  {
    "id": 4,
    "firstName": "Carmelo",
    "lastName": "Daugherty",
    "email": "Sigurd.Wolf91@gmail.com",
    "point": 41,
    "phone": "(880) 995-8257 x3278",
    "company": "Hamill and Sons"
  },
  {
    "id": 5,
    "firstName": "Eloisa",
    "lastName": "Rutherford",
    "email": "Leda61@hotmail.com",
    "point": 25,
    "phone": "(616) 366-7791",
    "company": "Barton and Sons"
  },
  {
    "id": 6,
    "firstName": "Pinkie",
    "lastName": "Trantow",
    "email": "Kevin.Graham@gmail.com",
    "point": 99,
    "phone": "544-246-1502 x470",
    "company": "Champlin LLC"
  },
  {
    "id": 7,
    "firstName": "Haylie",
    "lastName": "Schinner",
    "email": "Tristian7@yahoo.com",
    "point": 77,
    "phone": "712.789.3982 x6395",
    "company": "Miller, Roob and Prosacco"
  },
  {
    "id": 8,
    "firstName": "Delmer",
    "lastName": "Erdman",
    "email": "Melody_Bergstrom82@gmail.com",
    "point": 43,
    "phone": "1-261-753-3907 x8011",
    "company": "Blick, Stark and Gerlach"
  },
  {
    "id": 9,
    "firstName": "Tiana",
    "lastName": "Mayert",
    "email": "Abel60@gmail.com",
    "point": 33,
    "phone": "1-794-302-0373 x7307",
    "company": "Hackett Group"
  },
  {
    "id": 10,
    "firstName": "Verlie",
    "lastName": "Howell",
    "email": "Jo22@hotmail.com",
    "point": 44,
    "phone": "(369) 415-8767 x530",
    "company": "Boyer Inc"
  },
  {
    "id": 11,
    "firstName": "Brenda",
    "lastName": "Jast",
    "email": "Dorian67@yahoo.com",
    "point": 67,
    "phone": "(282) 569-2356 x84738",
    "company": "Lehner, Hilpert and Cruickshank"
  },
  {
    "id": 12,
    "firstName": "Solon",
    "lastName": "Thiel",
    "email": "Bettie.Hartmann15@gmail.com",
    "point": 39,
    "phone": "1-872-622-0819",
    "company": "Schinner Group"
  },
  {
    "id": 13,
    "firstName": "Coty",
    "lastName": "Bauch",
    "email": "Avis.Volkman@yahoo.com",
    "point": 78,
    "phone": "229-848-3646",
    "company": "Bode, Simonis and Botsford"
  },
  {
    "id": 14,
    "firstName": "Kade",
    "lastName": "Wilderman",
    "email": "Alva2@gmail.com",
    "point": 72,
    "phone": "947-410-7521",
    "company": "Wyman - Bradtke"
  },
  {
    "id": 15,
    "firstName": "Cayla",
    "lastName": "Anderson",
    "email": "Bria.Spinka81@yahoo.com",
    "point": 37,
    "phone": "(333) 491-0240 x3522",
    "company": "Gutkowski - Bernier"
  },
  {
    "id": 16,
    "firstName": "Robin",
    "lastName": "Tromp",
    "email": "Taryn.Veum18@hotmail.com",
    "point": 95,
    "phone": "1-693-667-6199 x0433",
    "company": "Champlin - Hegmann"
  },
  {
    "id": 17,
    "firstName": "Filiberto",
    "lastName": "Connelly",
    "email": "Minnie.Schultz67@gmail.com",
    "point": 52,
    "phone": "1-477-550-9183",
    "company": "Gibson - Harber"
  },
  {
    "id": 18,
    "firstName": "Dario",
    "lastName": "Lowe",
    "email": "Naomi_Osinski@yahoo.com",
    "point": 31,
    "phone": "568.862.4284 x93447",
    "company": "Rodriguez and Sons"
  },
  {
    "id": 19,
    "firstName": "Cindy",
    "lastName": "Bosco",
    "email": "Alexanne_Crist31@yahoo.com",
    "point": 25,
    "phone": "(874) 612-9713 x67394",
    "company": "Bogisich LLC"
  },
  {
    "id": 20,
    "firstName": "Jayson",
    "lastName": "Predovic",
    "email": "Gabriel.Zemlak@hotmail.com",
    "point": 77,
    "phone": "(796) 844-9279 x9940",
    "company": "Cummings LLC"
  },
  {
    "id": 21,
    "firstName": "Fay",
    "lastName": "Torphy",
    "email": "Delphia_Johns51@hotmail.com",
    "point": 65,
    "phone": "1-333-309-1188",
    "company": "Corwin, Lueilwitz and Lindgren"
  },
  {
    "id": 22,
    "firstName": "Eulah",
    "lastName": "Rodriguez",
    "email": "Esta_Blick@yahoo.com",
    "point": 94,
    "phone": "1-276-302-5154 x71536",
    "company": "Ebert - Ritchie"
  },
  {
    "id": 23,
    "firstName": "Eden",
    "lastName": "Prosacco",
    "email": "Junius93@yahoo.com",
    "point": 18,
    "phone": "814-578-5290",
    "company": "Luettgen LLC"
  },
  {
    "id": 24,
    "firstName": "Dasia",
    "lastName": "Mante",
    "email": "Nayeli_Klein52@gmail.com",
    "point": 14,
    "phone": "(697) 923-0255",
    "company": "Romaguera LLC"
  },
  {
    "id": 25,
    "firstName": "Jacey",
    "lastName": "Kuhn",
    "email": "Georgette_Rolfson@yahoo.com",
    "point": 20,
    "phone": "(724) 238-7811",
    "company": "Tromp, Mertz and Koelpin"
  },
  {
    "id": 26,
    "firstName": "Fleta",
    "lastName": "Fisher",
    "email": "Kaia_Feest47@yahoo.com",
    "point": 35,
    "phone": "(609) 481-3796 x204",
    "company": "Christiansen, Harber and Kshlerin"
  },
  {
    "id": 27,
    "firstName": "Maritza",
    "lastName": "Torphy",
    "email": "Elta.Berge41@yahoo.com",
    "point": 76,
    "phone": "(472) 409-5822 x687",
    "company": "Littel - Harvey"
  },
  {
    "id": 28,
    "firstName": "Helene",
    "lastName": "Prosacco",
    "email": "Anita.Veum17@hotmail.com",
    "point": 63,
    "phone": "900.657.0400 x95539",
    "company": "Harris and Sons"
  },
  {
    "id": 29,
    "firstName": "Jeffery",
    "lastName": "Quitzon",
    "email": "Morton_Erdman@hotmail.com",
    "point": 44,
    "phone": "1-712-814-3777 x18035",
    "company": "Ratke - DuBuque"
  },
  {
    "id": 30,
    "firstName": "Tessie",
    "lastName": "Mraz",
    "email": "Toney58@yahoo.com",
    "point": 77,
    "phone": "802.210.3167 x038",
    "company": "Lind - Hackett"
  },
  {
    "id": 31,
    "firstName": "Carol",
    "lastName": "Zboncak",
    "email": "Oswaldo.Gerhold92@gmail.com",
    "point": 72,
    "phone": "(505) 210-5471 x591",
    "company": "Adams - Kub"
  },
  {
    "id": 32,
    "firstName": "Robyn",
    "lastName": "Auer",
    "email": "Kieran39@yahoo.com",
    "point": 19,
    "phone": "(430) 997-4256 x063",
    "company": "Keeling - Leffler"
  },
  {
    "id": 33,
    "firstName": "Enrico",
    "lastName": "Hoppe",
    "email": "Elisa_Jacobson51@hotmail.com",
    "point": 98,
    "phone": "(339) 301-8497 x0062",
    "company": "Gottlieb, Kessler and Bogisich"
  },
  {
    "id": 34,
    "firstName": "Kraig",
    "lastName": "Johnston",
    "email": "Carolanne19@yahoo.com",
    "point": 86,
    "phone": "941-605-5544 x243",
    "company": "Lehner and Sons"
  },
  {
    "id": 35,
    "firstName": "Lemuel",
    "lastName": "Mosciski",
    "email": "Reymundo_Pacocha@hotmail.com",
    "point": 24,
    "phone": "1-934-532-8339",
    "company": "Effertz Group"
  },
  {
    "id": 36,
    "firstName": "Ken",
    "lastName": "Stoltenberg",
    "email": "Peggie_Cassin@hotmail.com",
    "point": 50,
    "phone": "282-328-1809",
    "company": "Koepp LLC"
  },
  {
    "id": 37,
    "firstName": "Melba",
    "lastName": "Bernier",
    "email": "Minerva_Kassulke23@yahoo.com",
    "point": 62,
    "phone": "(470) 237-1048",
    "company": "Gulgowski, Von and Jacobi"
  },
  {
    "id": 38,
    "firstName": "Effie",
    "lastName": "Bauch",
    "email": "Lexus_Blanda@hotmail.com",
    "point": 89,
    "phone": "(666) 942-9790 x6004",
    "company": "Kuhic Inc"
  },
  {
    "id": 39,
    "firstName": "Tate",
    "lastName": "Murphy",
    "email": "Clifford_Conroy@hotmail.com",
    "point": 78,
    "phone": "764-693-3279 x54041",
    "company": "Witting, Swaniawski and Boehm"
  },
  {
    "id": 40,
    "firstName": "Dorian",
    "lastName": "Spencer",
    "email": "Anahi_Veum53@gmail.com",
    "point": 41,
    "phone": "1-697-878-5662 x0133",
    "company": "Goodwin - Goyette"
  },
  {
    "id": 41,
    "firstName": "Joanny",
    "lastName": "Orn",
    "email": "Francisca_Romaguera90@hotmail.com",
    "point": 60,
    "phone": "(383) 287-5692 x1460",
    "company": "Jacobs - Hermiston"
  },
  {
    "id": 42,
    "firstName": "Gregg",
    "lastName": "Collins",
    "email": "Ken.Hermann@hotmail.com",
    "point": 67,
    "phone": "601.443.5725",
    "company": "Tremblay - Jones"
  },
  {
    "id": 43,
    "firstName": "Lilla",
    "lastName": "Stoltenberg",
    "email": "Adelle_Kautzer@hotmail.com",
    "point": 25,
    "phone": "1-440-922-5054 x76299",
    "company": "Veum and Sons"
  },
  {
    "id": 44,
    "firstName": "Brock",
    "lastName": "Jacobson",
    "email": "Katelin38@hotmail.com",
    "point": 77,
    "phone": "1-689-541-4085 x386",
    "company": "Corkery, Spencer and Bergnaum"
  },
  {
    "id": 45,
    "firstName": "Skylar",
    "lastName": "Russel",
    "email": "Keegan_Turner87@gmail.com",
    "point": 18,
    "phone": "441.847.1626",
    "company": "Carroll - Dibbert"
  },
  {
    "id": 46,
    "firstName": "Betty",
    "lastName": "Abbott",
    "email": "Leon73@yahoo.com",
    "point": 41,
    "phone": "966-726-7792 x5245",
    "company": "Muller, Heller and Reinger"
  },
  {
    "id": 47,
    "firstName": "Trinity",
    "lastName": "Mraz",
    "email": "Howell.Altenwerth47@hotmail.com",
    "point": 11,
    "phone": "1-921-519-7556 x3357",
    "company": "Henreich, Kulas and Mante"
  },
  {
    "id": 48,
    "firstName": "Everardo",
    "lastName": "Cremin",
    "email": "Easton_Wilkinson@hotmail.com",
    "point": 46,
    "phone": "(511) 355-5982 x559",
    "company": "Henreich, Beer and Ward"
  },
  {
    "id": 49,
    "firstName": "Desmond",
    "lastName": "Wolff",
    "email": "Ophelia.Mills64@yahoo.com",
    "point": 42,
    "phone": "956-985-0182",
    "company": "Bruen Group"
  }
];
const userSection = document.getElementById("user-table");
const createUserSection = document.getElementById("user-create");
const profileSection = document.getElementById("user-profile");
const editSection = document.getElementById("user-edit");
const viewManager = (users, create, profile, edit) => {
  if (users) userSection.classList.replace("hidden", "block");
  else userSection.classList.replace("block", "hidden");
  if (create) createUserSection.classList.replace("hidden", "block");
  else createUserSection.classList.replace("block", "hidden");
  if (profile) profileSection.classList.replace("hidden", "block");
  else profileSection.classList.replace("block", "hidden");
  if (edit) editSection.classList.replace("hidden", "block");
  else editSection.classList.replace("block", "hidden");
  return;
};
const loadDataToTable = users => {
    if (users.length <= 0) {
    document.getElementById("table-container").innerHTML = `<h1 class='text-lg ml-4'>No data found</h1>`;
    return;
  }
  const tableBody = document.getElementById("table-body");
  tableBody.innerHTML=''
  users.map(user => {
    const { id, firstName, lastName, email, point, phone, company } = user;
    const tr = document.createElement('tr');
    tr.innerHTML = `
    <th>${id + 1}</th>
    <td>${firstName} ${lastName}</td>
    <td>${email}</td>
    <td>${point}</td>
    <td>${phone}</td>
    <td>${company}</td>
    <td><button onclick="showProfile(${id})" class="btn btn-xs btn-neural font-semibold" id="profile-btn">Profile</button></td>
    <td><button onclick="editProfile(${id})" class="btn btn-xs btn-secondary font-semibold" href="">Edit</button></td>
    <td><a class="btn btn-xs btn-accent font-semibold" href="">Delete</a></td>
    `;
    tableBody.appendChild(tr)
  })
  viewManager(true, false, false, false);
  return;
};

//search user
document.getElementById('title').addEventListener('click', () => { loadDataToTable(data) })
document.querySelector('#search-box').addEventListener('change', (event) => {
  const searchBy = event.target.value;
  if (searchBy === '') {
    console.log('here');
    document.getElementById('all-users-title').innerText = `All Users`
    loadDataToTable(data);
    return;
  }
  document.getElementById('all-users-title').innerText = `Searched by '${searchBy}'`
  console.log(searchBy);
  loadDataToTable(data.filter(user => (user.firstName.includes(searchBy) || user.lastName.includes(searchBy))));
  return;
});

//show user profile
const showProfile = (id) => {
  viewManager(false, false, true, false);
  document.getElementById('profile-name').innerText = `${data[id].firstName} ${data[id].lastName}`;
  document.getElementById('profile-email').innerText = `${data[id].email}`;
  document.getElementById('profile-phone').innerText = `${data[id].phone}`;
  document.getElementById('profile-company').innerText = `Works at ${data[id].company}`;
  document.getElementById('profile-point').innerText = `User point: ${data[id].point}`;
  document.getElementById('profile-edit').addEventListener('click', () => { editProfile(id) }
  )
  return;
};
const editProfile = (id) => {
  console.log(id);
  viewManager(false, false, false, true);
  return;
};
const createUserBtn = document.getElementById('create-user-btn');
createUserBtn.addEventListener('click', () => {
  viewManager(false, true, false, false);
});
loadDataToTable(data);